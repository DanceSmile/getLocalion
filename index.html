<!DOCTYPE html>
<html lang="en">
    <head>
        <title>getLocation map  by danceSmile</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.2/dist/leaflet.css" />
        <link href="./css/style.css" rel="stylesheet">
    </head>
    <body>
        <div id="map">
                
        </div>
    </body>

     <script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>
    <script>
           function getLocation(){
               var options={
                   enableHighAccuracy:true, 
                   maximumAge:1000
               }
               if(navigator.geolocation){
                   //浏览器支持geolocation
                   navigator.geolocation.getCurrentPosition(onSuccess,onError,options);
                   
               }else{
                   //浏览器不支持geolocation
               }
           }

           //成功时
           function onSuccess(position){
               //返回用户位置
               //经度
               var longitude =position.coords.longitude;
               //纬度
               var latitude = position.coords.latitude;
           }
  

           //失败时
           function onError(error){
               switch(error.code){
                   case 1:
                   alert("位置服务被拒绝");
                   break;

                   case 2:
                   alert("暂时获取不到位置信息");
                   break;

                   case 3:
                   alert("获取信息超时");
                   break;

                   case 4:
                    alert("未知错误");
                   break;
               }

           }

           // Leaflet on Mobile
           //    实例地图类
           var map = L.map('map',{

            //    修改坐标系
               crs : L.CRS.Simple,

            //    设置最大拖动边界
               maxBounds : [[-456.5,-443],[456.5,443]],

            //    设置缩放的最小值
               minZoom : -2,

            //    设置地图放大的最大值W
               maxZoom : 2,

            //    设置初始化的缩放值
               zoom:2,
               

            //    设置地图中心点
               center:[0,0],

            })

            // 获取图片的长宽
            var imageUrl = './img/map.png';

            var img = new Image();

            img.src = imageUrl;

            var imgWidth = img.width;

            var imgHeight = img.height;

            // 1.使用图片自定义icon标记图标
            // var myIcon = L.icon({
            //     iconUrl: 'my-icon.png',
            //     iconRetinaUrl: 'my-icon@2x.pngW',
            //     iconSize: [38, 95],W
            //     iconAnchor: [22, 94],
            //     popupAnchor: [-3, -76],
            //     shadowUrl: 'my-icon-shadow.png',
            //     shadowRetinaUrl: 'my-icon-shadow@2x.png',
            //     shadowSize: [68, 95],
            //     shadowAnchor: [22, 94]
            // });

            // 2.使用div自定义标记点
            var myIcon = L.divIcon({className: 'my-div-icon'});
             // you can set .my-div-icon styles in CSS
            //  L.marker([0, 0], {icon: myIcon}).addTo(map);


            // 添加标记点
            var center  = L.marker([0, 0],{title:""});
            center.addTo(map)
            center.on('click',function(){

            })




            // 添加图片到地图
            L.imageOverlay(imageUrl,[[-456.5,-448],[456.5,443]]).addTo(map);

            // 地图显示此边界的值
            // map.fitBounds([[-456.5,-443],[456.5,443]])

            // 触发地图的点击事件
            map.on('click', function(e) {
                 console.log(e.latlng); // e is an event object (MouseEvent in this case)
                 L.marker(e.latlng).addTo(map);
            });


           //window.onload=getLocation;
   
    </script>
</html>